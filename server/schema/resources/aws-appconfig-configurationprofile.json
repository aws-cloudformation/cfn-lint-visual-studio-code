{
  "typeName": "AWS::AppConfig::ConfigurationProfile",
  "description": "An example resource schema demonstrating some basic constructs and validation rules.",
  "sourceUrl": "https://github.com/aws-cloudformation/aws-cloudformation-resource-providers-appconfig",
  "definitions": {
    "Validators": {
      "description": "A list of methods for validating the configuration.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Type": {
          "type": "string",
          "description": "AWS AppConfig supports validators of type JSON_SCHEMA and LAMBDA.",
          "markdownDescription": "AWS AppConfig supports validators of type JSON_SCHEMA and LAMBDA.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption"
        },
        "Content": {
          "type": "string",
          "description": "Either the JSON Schema content or the Amazon Resource Name (ARN) of an Lambda function.",
          "minLength": 0,
          "maxLength": 32768,
          "markdownDescription": "Either the JSON Schema content or the Amazon Resource Name (ARN) of an Lambda function.\n\n---\n\nRequired: No  \nType: String  \nMaximum Length: 32768  \nUpdate requires: No interruption"
        }
      },
      "markdownDescription": "A list of methods for validating the configuration.\n\n---\n\nRequired: No  \nUpdate requires: No interruption"
    },
    "Tags": {
      "description": "Metadata to assign to the configuration profile. Tags help organize and categorize your AWS AppConfig resources. Each tag consists of a key and an optional value, both of which you define.",
      "type": "object",
      "properties": {
        "Key": {
          "type": "string",
          "description": "The key-value string map. The tag key can be up to 128 characters and must not start with aws:.",
          "minLength": 1,
          "maxLength": 128,
          "markdownDescription": "The key-value string map. The tag key can be up to 128 characters and must not start with aws:.\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 128  \nPattern: ^(?!aws:.)[a-zA-Z0-9 +=._:/-]*$  \nUpdate requires: No interruption"
        },
        "Value": {
          "type": "string",
          "description": "The tag value can be up to 256 characters.",
          "minLength": 0,
          "maxLength": 256,
          "markdownDescription": "The tag value can be up to 256 characters.\n\n---\n\nRequired: No  \nType: String  \nMaximum Length: 256  \nUpdate requires: No interruption"
        }
      },
      "additionalProperties": false,
      "markdownDescription": "Metadata to assign to the configuration profile. Tags help organize and categorize your AWS AppConfig resources. Each tag consists of a key and an optional value, both of which you define.\n\n---\n\nRequired: No  \nUpdate requires: No interruption"
    }
  },
  "properties": {
    "LocationUri": {
      "type": "string",
      "description": "A URI to locate the configuration. You can specify the AWS AppConfig hosted configuration store, Systems Manager (SSM) document, an SSM Parameter Store parameter, or an Amazon S3 object.",
      "minLength": 1,
      "maxLength": 2048,
      "markdownDescription": "A URI to locate the configuration. You can specify the AWS AppConfig hosted configuration store, Systems Manager (SSM) document, an SSM Parameter Store parameter, or an Amazon S3 object.\n\n---\n\nRequired: Yes  \nType: String  \nMinimum Length: 1  \nMaximum Length: 2048  \nUpdate requires: Replacement"
    },
    "Type": {
      "type": "string",
      "description": "The type of configurations contained in the profile. When calling this API, enter one of the following values for Type: AWS.AppConfig.FeatureFlags, AWS.Freeform",
      "markdownDescription": "The type of configurations contained in the profile. When calling this API, enter one of the following values for Type: AWS.AppConfig.FeatureFlags, AWS.Freeform\n\n---\n\nRequired: No  \nType: String  \nPattern: ^[a-zA-Z\\.]+  \nUpdate requires: Replacement"
    },
    "Description": {
      "type": "string",
      "description": "A description of the configuration profile.",
      "minLength": 0,
      "maxLength": 1024,
      "markdownDescription": "A description of the configuration profile.\n\n---\n\nRequired: No  \nType: String  \nMaximum Length: 1024  \nUpdate requires: No interruption"
    },
    "Validators": {
      "type": "array",
      "description": "A list of methods for validating the configuration.",
      "uniqueItems": false,
      "items": {
        "$ref": "#/definitions/Validators"
      },
      "insertionOrder": false,
      "maxItems": 2,
      "markdownDescription": "A list of methods for validating the configuration.\n\n---\n\nRequired: No  \nType: Array  \nUpdate requires: No interruption"
    },
    "RetrievalRoleArn": {
      "type": "string",
      "description": "The ARN of an IAM role with permission to access the configuration at the specified LocationUri.",
      "minLength": 20,
      "maxLength": 2048,
      "markdownDescription": "The ARN of an IAM role with permission to access the configuration at the specified LocationUri.\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 20  \nMaximum Length: 2048  \nPattern: ^((arn):(aws|aws-cn|aws-iso|aws-iso-[a-z]{1}|aws-us-gov):(iam)::\\d{12}:role[/].*)$  \nUpdate requires: No interruption"
    },
    "ApplicationId": {
      "type": "string",
      "description": "The application ID.",
      "markdownDescription": "The application ID.\n\n---\n\nRequired: Yes  \nType: String  \nPattern: [a-z0-9]{4,7}  \nUpdate requires: Replacement"
    },
    "Tags": {
      "type": "array",
      "description": "Metadata to assign to the configuration profile. Tags help organize and categorize your AWS AppConfig resources. Each tag consists of a key and an optional value, both of which you define.",
      "uniqueItems": false,
      "items": {
        "$ref": "#/definitions/Tags"
      },
      "insertionOrder": false,
      "markdownDescription": "Metadata to assign to the configuration profile. Tags help organize and categorize your AWS AppConfig resources. Each tag consists of a key and an optional value, both of which you define.\n\n---\n\nRequired: No  \nType: Array  \nUpdate requires: No interruption"
    },
    "Name": {
      "type": "string",
      "description": "A name for the configuration profile.",
      "minLength": 1,
      "maxLength": 128,
      "markdownDescription": "A name for the configuration profile.\n\n---\n\nRequired: Yes  \nType: String  \nMinimum Length: 1  \nMaximum Length: 128  \nUpdate requires: No interruption"
    },
    "KmsKeyIdentifier": {
      "type": "string",
      "description": "The AWS Key Management Service key identifier (key ID, key alias, or key ARN) provided when the resource was created or updated.",
      "markdownDescription": "The AWS Key Management Service key identifier (key ID, key alias, or key ARN) provided when the resource was created or updated.\n\n---\n\nRequired: No  \nType: String  \nPattern: ^[\\da-f]{8}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{4}-[\\da-f]{12}|alias/[a-zA-Z0-9/_-]{1,250}|arn:aws[a-zA-Z-]*:kms:[a-z]{2}(-gov|-iso(b?))?-[a-z]+-\\d{1}:\\d{12}:(key/[0-9a-f-]{36}|alias/[a-zA-Z0-9/_-]{1,250})$  \nUpdate requires: No interruption"
    }
  },
  "additionalProperties": false,
  "required": [
    "LocationUri",
    "ApplicationId",
    "Name"
  ],
  "createOnlyProperties": [
    "/properties/LocationUri",
    "/properties/Type",
    "/properties/ApplicationId"
  ],
  "primaryIdentifier": [
    "/properties/ApplicationId",
    "/properties/ConfigurationProfileId"
  ],
  "readOnlyProperties": [
    "/properties/ConfigurationProfileId",
    "/properties/KmsKeyArn"
  ],
  "handlers": {
    "create": {
      "permissions": [
        "appconfig:CreateConfigurationProfile",
        "appconfig:GetConfigurationProfile",
        "appconfig:TagResource",
        "appconfig:ListTagsForResource",
        "iam:PassRole"
      ]
    },
    "read": {
      "permissions": [
        "appconfig:GetConfigurationProfile",
        "appconfig:ListTagsForResource"
      ]
    },
    "update": {
      "permissions": [
        "appconfig:UpdateConfigurationProfile",
        "appconfig:TagResource",
        "appconfig:UntagResource",
        "iam:PassRole"
      ]
    },
    "delete": {
      "permissions": [
        "appconfig:DeleteConfigurationProfile"
      ]
    },
    "list": {
      "handlerSchema": {
        "properties": {
          "ApplicationId": {
            "$ref": "resource-schema.json#/properties/ApplicationId"
          }
        },
        "required": [
          "ApplicationId"
        ]
      },
      "permissions": [
        "appconfig:ListConfigurationProfiles"
      ]
    }
  },
  "tagging": {
    "taggable": true,
    "tagOnCreate": true,
    "tagUpdatable": true,
    "cloudFormationSystemTags": true,
    "tagProperty": "/properties/Tags"
  },
  "attributes": {
    "ConfigurationProfileId": {
      "type": "string",
      "description": "The configuration profile ID",
      "markdownDescription": "The configuration profile ID\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption"
    },
    "KmsKeyArn": {
      "type": "string",
      "description": "The Amazon Resource Name of the AWS Key Management Service key to encrypt new configuration data versions in the AWS AppConfig hosted configuration store. This attribute is only used for hosted configuration types. To encrypt data managed in other configuration stores, see the documentation for how to specify an AWS KMS key for that particular service.",
      "minLength": 20,
      "maxLength": 2048,
      "markdownDescription": "The Amazon Resource Name of the AWS Key Management Service key to encrypt new configuration data versions in the AWS AppConfig hosted configuration store. This attribute is only used for hosted configuration types. To encrypt data managed in other configuration stores, see the documentation for how to specify an AWS KMS key for that particular service.\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 20  \nMaximum Length: 2048  \nPattern: arn:(aws[a-zA-Z-]*)?:[a-z]+:([a-z]{2}((-gov)|(-iso(b?)))?-[a-z]+-\\d{1})?:(\\d{12})?:[a-zA-Z0-9-_/:.]+  \nUpdate requires: No interruption"
    }
  }
}