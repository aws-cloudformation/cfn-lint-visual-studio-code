{
  "typeName": "AWS::Omics::Workflow",
  "description": "Definition of AWS::Omics::Workflow Resource Type",
  "definitions": {
    "TagMap": {
      "type": "object",
      "description": "A map of resource tags",
      "patternProperties": {
        ".+": {
          "type": "string",
          "maxLength": 256,
          "minLength": 0,
          "description": "Resource tag value",
          "markdownDescription": "Resource tag value\n\n---\n\nRequired: No  \nType: String  \nMaximum Length: 256  \nUpdate requires: No interruption\n"
        }
      },
      "additionalProperties": false,
      "markdownDescription": "A map of resource tags\n\n---\n\nRequired: No  \nUpdate requires: No interruption\n"
    },
    "WorkflowEngine": {
      "type": "string",
      "maxLength": 64,
      "minLength": 1,
      "enum": [
        "WDL",
        "NEXTFLOW",
        "CWL"
      ],
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nAllowed Values: WDL | NEXTFLOW | CWL  \nMinimum Length: 1  \nMaximum Length: 64  \nUpdate requires: No interruption\n"
    },
    "Accelerators": {
      "type": "string",
      "maxLength": 64,
      "minLength": 1,
      "enum": [
        "GPU"
      ],
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nAllowed Values: GPU  \nMinimum Length: 1  \nMaximum Length: 64  \nUpdate requires: No interruption\n"
    },
    "WorkflowParameter": {
      "type": "object",
      "properties": {
        "Description": {
          "type": "string",
          "maxLength": 256,
          "minLength": 0,
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMaximum Length: 256  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: No interruption\n"
        },
        "Optional": {
          "type": "boolean",
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: Boolean  \nUpdate requires: No interruption\n"
        }
      },
      "additionalProperties": false,
      "markdownDescription": "\n\n---\n\nRequired: No  \nUpdate requires: No interruption\n"
    },
    "WorkflowParameterTemplate": {
      "type": "object",
      "maxProperties": 1000,
      "minProperties": 1,
      "patternProperties": {
        ".*": {
          "$ref": "#/definitions/WorkflowParameter"
        }
      },
      "additionalProperties": false,
      "markdownDescription": "\n\n---\n\nRequired: No  \nUpdate requires: No interruption\n"
    },
    "WorkflowStatus": {
      "type": "string",
      "maxLength": 64,
      "minLength": 1,
      "enum": [
        "CREATING",
        "ACTIVE",
        "UPDATING",
        "DELETED",
        "FAILED"
      ],
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nAllowed Values: CREATING | ACTIVE | UPDATING | DELETED | FAILED  \nMinimum Length: 1  \nMaximum Length: 64  \nUpdate requires: No interruption\n"
    },
    "WorkflowType": {
      "type": "string",
      "maxLength": 64,
      "minLength": 1,
      "enum": [
        "PRIVATE"
      ],
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nAllowed Values: PRIVATE  \nMinimum Length: 1  \nMaximum Length: 64  \nUpdate requires: No interruption\n"
    },
    "StorageType": {
      "type": "string",
      "maxLength": 64,
      "minLength": 1,
      "enum": [
        "STATIC",
        "DYNAMIC"
      ],
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nAllowed Values: STATIC | DYNAMIC  \nMinimum Length: 1  \nMaximum Length: 64  \nUpdate requires: No interruption\n"
    },
    "Uuid": {
      "type": "string",
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nPattern: ^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$  \nUpdate requires: No interruption\n"
    },
    "SourceReference": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": [
            "BRANCH",
            "TAG",
            "COMMIT"
          ],
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nAllowed Values: BRANCH | TAG | COMMIT  \nUpdate requires: No interruption\n"
        },
        "value": {
          "type": "string",
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
        },
        "markdownDescription": "\n\n---\n\nRequired: No  \nType: {'type': 'string', 'enum': ['branch', 'tag', 'commit'], 'markdowndescription': '\\n\\n---\\n\\nrequired: no  \\ntype: string  \\nallowed values: branch | tag | commit  \\nupdate requires: no interruption\\n'}  \nUpdate requires: No interruption\n"
      },
      "markdownDescription": "\n\n---\n\nRequired: No  \nUpdate requires: No interruption\n"
    },
    "DefinitionRepository": {
      "type": "object",
      "properties": {
        "connectionArn": {
          "type": "string",
          "minLength": 1,
          "maxLength": 256,
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 256  \nPattern: ^arn:aws(-[\\\\w]+)*:.+:.+:[0-9]{12}:.+$  \nUpdate requires: No interruption\n"
        },
        "fullRepositoryId": {
          "type": "string",
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nPattern: .+/.+  \nUpdate requires: No interruption\n"
        },
        "sourceReference": {
          "$ref": "#/definitions/SourceReference"
        },
        "excludeFilePatterns": {
          "type": "array",
          "items": {
            "type": "string",
            "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
          },
          "minItems": 1,
          "maxItems": 50,
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: Array  \nUpdate requires: No interruption\n"
        }
      },
      "markdownDescription": "\n\n---\n\nRequired: No  \nUpdate requires: No interruption\n"
    },
    "ContainerRegistryMap": {
      "type": "object",
      "properties": {
        "RegistryMappings": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/RegistryMapping"
          },
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: Array  \nUpdate requires: No interruption\n"
        },
        "ImageMappings": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ImageMapping"
          },
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: Array  \nUpdate requires: No interruption\n"
        }
      },
      "additionalProperties": false,
      "markdownDescription": "\n\n---\n\nRequired: No  \nUpdate requires: No interruption\n"
    },
    "ImageMapping": {
      "type": "object",
      "properties": {
        "SourceImage": {
          "type": "string",
          "maxLength": 750,
          "minLength": 1,
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 750  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: No interruption\n"
        },
        "DestinationImage": {
          "type": "string",
          "maxLength": 750,
          "minLength": 1,
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 750  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: No interruption\n"
        }
      },
      "additionalProperties": false,
      "markdownDescription": "\n\n---\n\nRequired: No  \nUpdate requires: No interruption\n"
    },
    "RegistryMapping": {
      "type": "object",
      "properties": {
        "UpstreamRegistryUrl": {
          "type": "string",
          "maxLength": 750,
          "minLength": 1,
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 750  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: No interruption\n"
        },
        "EcrRepositoryPrefix": {
          "type": "string",
          "maxLength": 256,
          "minLength": 1,
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 256  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: No interruption\n"
        },
        "UpstreamRepositoryPrefix": {
          "type": "string",
          "maxLength": 30,
          "minLength": 2,
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 2  \nMaximum Length: 30  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: No interruption\n"
        },
        "EcrAccountId": {
          "type": "string",
          "maxLength": 12,
          "minLength": 12,
          "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 12  \nMaximum Length: 12  \nPattern: ^[0-9]+$  \nUpdate requires: No interruption\n"
        }
      },
      "additionalProperties": false,
      "markdownDescription": "\n\n---\n\nRequired: No  \nUpdate requires: No interruption\n"
    }
  },
  "properties": {
    "Arn": {
      "type": "string",
      "maxLength": 128,
      "minLength": 1,
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 128  \nPattern: ^arn:.+$  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "CreationTime": {
      "type": "string",
      "format": "date-time",
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "DefinitionUri": {
      "type": "string",
      "maxLength": 256,
      "minLength": 1,
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 256  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: Replacement\n"
    },
    "Description": {
      "type": "string",
      "maxLength": 256,
      "minLength": 1,
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 256  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: No interruption\n"
    },
    "Engine": {
      "$ref": "#/definitions/WorkflowEngine"
    },
    "Id": {
      "type": "string",
      "maxLength": 18,
      "minLength": 1,
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 18  \nPattern: ^[0-9]+$  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "Main": {
      "type": "string",
      "maxLength": 128,
      "minLength": 1,
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 128  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: Replacement\n"
    },
    "Name": {
      "type": "string",
      "maxLength": 128,
      "minLength": 1,
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 128  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: No interruption\n"
    },
    "ParameterTemplate": {
      "$ref": "#/definitions/WorkflowParameterTemplate"
    },
    "Status": {
      "$ref": "#/definitions/WorkflowStatus"
    },
    "Accelerators": {
      "$ref": "#/definitions/Accelerators"
    },
    "StorageCapacity": {
      "type": "number",
      "maximum": 100000,
      "minimum": 0,
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: Number  \nUpdate requires: Replacement\n"
    },
    "Tags": {
      "$ref": "#/definitions/TagMap"
    },
    "Type": {
      "$ref": "#/definitions/WorkflowType"
    },
    "StorageType": {
      "$ref": "#/definitions/StorageType"
    },
    "Uuid": {
      "$ref": "#/definitions/Uuid"
    },
    "WorkflowBucketOwnerId": {
      "type": "string",
      "description": "Optional workflow bucket owner ID to verify the workflow bucket",
      "markdownDescription": "Optional workflow bucket owner ID to verify the workflow bucket\n\n---\n\nRequired: No  \nType: String  \nPattern: ^[0-9]{12}$  \nUpdate requires: Replacement\n"
    },
    "DefinitionRepository": {
      "$ref": "#/definitions/DefinitionRepository"
    },
    "ParameterTemplatePath": {
      "type": "string",
      "description": "Path to the primary workflow parameter template JSON file inside the repository",
      "markdownDescription": "Path to the primary workflow parameter template JSON file inside the repository\n\n---\n\nRequired: No  \nType: String  \nPattern: ^[\\S]+$  \nUpdate requires: Replacement\n"
    },
    "readmePath": {
      "type": "string",
      "description": "The path to the workflow README markdown file within the repository. This file provides documentation and usage information for the workflow. If not specified, the README.md file from the root directory of the repository will be used.",
      "maxLength": 128,
      "minLength": 1,
      "markdownDescription": "The path to the workflow README markdown file within the repository. This file provides documentation and usage information for the workflow. If not specified, the README.md file from the root directory of the repository will be used.\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 128  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: Replacement\n"
    },
    "readmeUri": {
      "type": "string",
      "description": "The S3 URI of the README file for the workflow. This file provides documentation and usage information for the workflow. The S3 URI must begin with s3://USER-OWNED-BUCKET/. The requester must have access to the S3 bucket and object. The max README content length is 500 KiB.",
      "markdownDescription": "The S3 URI of the README file for the workflow. This file provides documentation and usage information for the workflow. The S3 URI must begin with s3://USER-OWNED-BUCKET/. The requester must have access to the S3 bucket and object. The max README content length is 500 KiB.\n\n---\n\nRequired: No  \nType: String  \nPattern: ^s3://([a-z0-9][a-z0-9-.]{1,61}[a-z0-9])/((.{1,1024}))$  \nUpdate requires: Replacement\n"
    },
    "readmeMarkdown": {
      "type": "string",
      "description": "The markdown content for the workflow's README file. This provides documentation and usage information for users of the workflow.",
      "markdownDescription": "The markdown content for the workflow's README file. This provides documentation and usage information for users of the workflow.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
    },
    "ContainerRegistryMap": {
      "$ref": "#/definitions/ContainerRegistryMap"
    },
    "ContainerRegistryMapUri": {
      "type": "string",
      "maxLength": 750,
      "minLength": 1,
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 750  \nPattern: ^[\\p{L}||\\p{M}||\\p{Z}||\\p{S}||\\p{N}||\\p{P}]+$  \nUpdate requires: Replacement\n"
    }
  },
  "readOnlyProperties": [
    "/properties/Arn",
    "/properties/CreationTime",
    "/properties/Id",
    "/properties/Status",
    "/properties/Type",
    "/properties/Uuid"
  ],
  "writeOnlyProperties": [
    "/properties/DefinitionUri",
    "/properties/WorkflowBucketOwnerId",
    "/properties/ParameterTemplatePath",
    "/properties/DefinitionRepository",
    "/properties/readmeUri",
    "/properties/readmeMarkdown",
    "/properties/ContainerRegistryMapUri"
  ],
  "createOnlyProperties": [
    "/properties/DefinitionUri",
    "/properties/Engine",
    "/properties/Main",
    "/properties/ParameterTemplate",
    "/properties/StorageCapacity",
    "/properties/Accelerators",
    "/properties/DefinitionRepository",
    "/properties/ParameterTemplatePath",
    "/properties/readmePath",
    "/properties/readmeUri",
    "/properties/WorkflowBucketOwnerId",
    "/properties/ContainerRegistryMap",
    "/properties/ContainerRegistryMapUri"
  ],
  "primaryIdentifier": [
    "/properties/Id"
  ],
  "tagging": {
    "taggable": true,
    "tagOnCreate": true,
    "tagUpdatable": true,
    "cloudFormationSystemTags": false,
    "tagProperty": "/properties/Tags",
    "permissions": [
      "omics:TagResource",
      "omics:UntagResource",
      "omics:ListTagsForResource"
    ]
  },
  "handlers": {
    "create": {
      "permissions": [
        "omics:CreateWorkflow",
        "omics:GetWorkflow",
        "omics:TagResource",
        "s3:PutObject",
        "s3:GetObject",
        "s3:GetObjectAttributes",
        "s3:HeadObject",
        "s3:GetEncryptionConfiguration",
        "kms:Decrypt",
        "kms:GenerateDataKey",
        "kms:GenerateDataKeyPair",
        "kms:GenerateDataKeyPairWithoutPlaintext",
        "kms:GenerateDataKeyWithoutPlaintext",
        "codeconnections:UseConnection",
        "codeconnections:GetConnection",
        "codeconnections:GetHost"
      ]
    },
    "read": {
      "permissions": [
        "omics:GetWorkflow"
      ]
    },
    "update": {
      "permissions": [
        "omics:UpdateWorkflow",
        "omics:GetWorkflow",
        "omics:TagResource",
        "omics:ListTagsForResource",
        "omics:UntagResource"
      ]
    },
    "delete": {
      "permissions": [
        "omics:DeleteWorkflow",
        "omics:GetWorkflow"
      ]
    },
    "list": {
      "permissions": [
        "omics:ListWorkflows"
      ]
    }
  },
  "additionalProperties": false,
  "attributes": {
    "Arn": {
      "type": "string",
      "maxLength": 128,
      "minLength": 1,
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 128  \nPattern: ^arn:.+$  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "CreationTime": {
      "type": "string",
      "format": "date-time",
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "Id": {
      "type": "string",
      "maxLength": 18,
      "minLength": 1,
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nMinimum Length: 1  \nMaximum Length: 18  \nPattern: ^[0-9]+$  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "Status": {
      "$ref": "#/definitions/WorkflowStatus"
    },
    "Type": {
      "$ref": "#/definitions/WorkflowType"
    },
    "Uuid": {
      "$ref": "#/definitions/Uuid"
    }
  }
}