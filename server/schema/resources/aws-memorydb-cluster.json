{
  "typeName": "AWS::MemoryDB::Cluster",
  "description": "The AWS::MemoryDB::Cluster resource creates an Amazon MemoryDB Cluster.",
  "sourceUrl": "https://github.com/aws-cloudformation/aws-cloudformation-resource-providers-memorydb",
  "definitions": {
    "Endpoint": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Address": {
          "description": "The DNS address of the primary read-write node.",
          "type": "string",
          "markdownDescription": "The DNS address of the primary read-write node.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
        },
        "Port": {
          "description": "The port number that the engine is listening on. ",
          "type": "integer",
          "markdownDescription": "The port number that the engine is listening on. \n\n---\n\nRequired: No  \nType: Integer  \nUpdate requires: No interruption\n"
        }
      },
      "markdownDescription": "\n\n---\n\nRequired: No  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "Tag": {
      "description": "A key-value pair to associate with a resource.",
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "Key": {
          "description": "The key for the tag. May not be null.",
          "type": "string",
          "minLength": 1,
          "maxLength": 128,
          "markdownDescription": "The key for the tag. May not be null.\n\n---\n\nRequired: Yes  \nType: String  \nMinimum Length: 1  \nMaximum Length: 128  \nPattern: ^(?!aws:)(?!memorydb:)[a-zA-Z0-9 _\\.\\/=+:\\-@]{1,128}$  \nUpdate requires: No interruption\n"
        },
        "Value": {
          "description": "The tag's value. May be null.",
          "type": "string",
          "minLength": 1,
          "maxLength": 256,
          "markdownDescription": "The tag's value. May be null.\n\n---\n\nRequired: Yes  \nType: String  \nMinimum Length: 1  \nMaximum Length: 256  \nPattern: ^(?!aws:)(?!memorydb:)[a-zA-Z0-9 _\\.\\/=+:\\-@]{1,256}$  \nUpdate requires: No interruption\n"
        }
      },
      "required": [
        "Key",
        "Value"
      ],
      "markdownDescription": "A key-value pair to associate with a resource.\n\n---\n\nRequired: No  \nUpdate requires: No interruption\n"
    },
    "DataTieringStatus": {
      "type": "string",
      "enum": [
        "true",
        "false"
      ],
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nAllowed Values: true | false  \nUpdate requires: No interruption\n"
    },
    "SupportedNetworkTypes": {
      "type": "string",
      "enum": [
        "ipv4",
        "ipv6",
        "dual_stack"
      ],
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nAllowed Values: ipv4 | ipv6 | dual_stack  \nUpdate requires: No interruption\n"
    },
    "SupportedIpDiscoveryTypes": {
      "type": "string",
      "enum": [
        "ipv4",
        "ipv6"
      ],
      "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nAllowed Values: ipv4 | ipv6  \nUpdate requires: No interruption\n"
    }
  },
  "properties": {
    "ClusterName": {
      "description": "The name of the cluster. This value must be unique as it also serves as the cluster identifier.",
      "type": "string",
      "markdownDescription": "The name of the cluster. This value must be unique as it also serves as the cluster identifier.\n\n---\n\nRequired: Yes  \nType: String  \nPattern: [a-z][a-z0-9\\-]*  \nUpdate requires: Replacement\n"
    },
    "Description": {
      "description": "An optional description of the cluster.",
      "type": "string",
      "markdownDescription": "An optional description of the cluster.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
    },
    "MultiRegionClusterName": {
      "description": "The name of the Global Datastore, it is generated by MemoryDB adding a prefix to MultiRegionClusterNameSuffix.",
      "type": "string",
      "markdownDescription": "The name of the Global Datastore, it is generated by MemoryDB adding a prefix to MultiRegionClusterNameSuffix.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: Replacement\n"
    },
    "Status": {
      "description": "The status of the cluster. For example, Available, Updating, Creating.",
      "type": "string",
      "markdownDescription": "The status of the cluster. For example, Available, Updating, Creating.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "NodeType": {
      "description": "The compute and memory capacity of the nodes in the cluster.",
      "type": "string",
      "markdownDescription": "The compute and memory capacity of the nodes in the cluster.\n\n---\n\nRequired: Yes  \nType: String  \nUpdate requires: No interruption\n"
    },
    "NumShards": {
      "description": "The number of shards the cluster will contain.",
      "type": "integer",
      "markdownDescription": "The number of shards the cluster will contain.\n\n---\n\nRequired: No  \nType: Integer  \nUpdate requires: No interruption\n"
    },
    "NumReplicasPerShard": {
      "description": "The number of replicas to apply to each shard. The limit is 5.",
      "type": "integer",
      "markdownDescription": "The number of replicas to apply to each shard. The limit is 5.\n\n---\n\nRequired: No  \nType: Integer  \nUpdate requires: No interruption\n"
    },
    "SubnetGroupName": {
      "description": "The name of the subnet group to be used for the cluster.",
      "type": "string",
      "markdownDescription": "The name of the subnet group to be used for the cluster.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: Replacement\n"
    },
    "SecurityGroupIds": {
      "description": "One or more Amazon VPC security groups associated with this cluster.",
      "type": "array",
      "uniqueItems": false,
      "insertionOrder": false,
      "items": {
        "type": "string",
        "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
      },
      "markdownDescription": "One or more Amazon VPC security groups associated with this cluster.\n\n---\n\nRequired: No  \nType: Array  \nUpdate requires: No interruption\n"
    },
    "MaintenanceWindow": {
      "description": "Specifies the weekly time range during which maintenance on the cluster is performed. It is specified as a range in the format ddd:hh24:mi-ddd:hh24:mi (24H Clock UTC). The minimum maintenance window is a 60 minute period.",
      "type": "string",
      "markdownDescription": "Specifies the weekly time range during which maintenance on the cluster is performed. It is specified as a range in the format ddd:hh24:mi-ddd:hh24:mi (24H Clock UTC). The minimum maintenance window is a 60 minute period.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
    },
    "ParameterGroupName": {
      "description": "The name of the parameter group associated with the cluster.",
      "type": "string",
      "markdownDescription": "The name of the parameter group associated with the cluster.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
    },
    "ParameterGroupStatus": {
      "description": "The status of the parameter group used by the cluster.",
      "type": "string",
      "markdownDescription": "The status of the parameter group used by the cluster.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "Port": {
      "description": "The port number on which each member of the cluster accepts connections.",
      "type": "integer",
      "markdownDescription": "The port number on which each member of the cluster accepts connections.\n\n---\n\nRequired: No  \nType: Integer  \nUpdate requires: Replacement\n"
    },
    "SnapshotRetentionLimit": {
      "description": "The number of days for which MemoryDB retains automatic snapshots before deleting them. For example, if you set SnapshotRetentionLimit to 5, a snapshot that was taken today is retained for 5 days before being deleted.",
      "type": "integer",
      "markdownDescription": "The number of days for which MemoryDB retains automatic snapshots before deleting them. For example, if you set SnapshotRetentionLimit to 5, a snapshot that was taken today is retained for 5 days before being deleted.\n\n---\n\nRequired: No  \nType: Integer  \nUpdate requires: No interruption\n"
    },
    "SnapshotWindow": {
      "description": "The daily time range (in UTC) during which MemoryDB begins taking a daily snapshot of your cluster.",
      "type": "string",
      "markdownDescription": "The daily time range (in UTC) during which MemoryDB begins taking a daily snapshot of your cluster.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
    },
    "ACLName": {
      "description": "The name of the Access Control List to associate with the cluster.",
      "type": "string",
      "markdownDescription": "The name of the Access Control List to associate with the cluster.\n\n---\n\nRequired: Yes  \nType: String  \nPattern: [a-zA-Z][a-zA-Z0-9\\-]*  \nUpdate requires: No interruption\n"
    },
    "SnsTopicArn": {
      "description": "The Amazon Resource Name (ARN) of the Amazon Simple Notification Service (SNS) topic to which notifications are sent.",
      "type": "string",
      "markdownDescription": "The Amazon Resource Name (ARN) of the Amazon Simple Notification Service (SNS) topic to which notifications are sent.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
    },
    "SnsTopicStatus": {
      "description": "The status of the Amazon SNS notification topic. Notifications are sent only if the status is enabled.",
      "type": "string",
      "markdownDescription": "The status of the Amazon SNS notification topic. Notifications are sent only if the status is enabled.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
    },
    "TLSEnabled": {
      "description": "A flag that enables in-transit encryption when set to true.\n\nYou cannot modify the value of TransitEncryptionEnabled after the cluster is created. To enable in-transit encryption on a cluster you must set TransitEncryptionEnabled to true when you create a cluster.",
      "type": "boolean",
      "markdownDescription": "A flag that enables in-transit encryption when set to true.\n\nYou cannot modify the value of TransitEncryptionEnabled after the cluster is created. To enable in-transit encryption on a cluster you must set TransitEncryptionEnabled to true when you create a cluster.\n\n---\n\nRequired: No  \nType: Boolean  \nUpdate requires: Replacement\n"
    },
    "DataTiering": {
      "type": "object",
      "description": "Enables data tiering. Data tiering is only supported for clusters using the r6gd node type. This parameter must be set when using r6gd nodes.",
      "$ref": "#/definitions/DataTieringStatus",
      "markdownDescription": "Enables data tiering. Data tiering is only supported for clusters using the r6gd node type. This parameter must be set when using r6gd nodes.\n\n---\n\nRequired: No  \nUpdate requires: Replacement\n"
    },
    "NetworkType": {
      "type": "object",
      "description": "Must be either ipv4 | ipv6 | dual_stack.",
      "$ref": "#/definitions/SupportedNetworkTypes",
      "markdownDescription": "Must be either ipv4 | ipv6 | dual_stack.\n\n---\n\nRequired: No  \nUpdate requires: Replacement\n"
    },
    "IpDiscovery": {
      "type": "object",
      "description": "For clusters wth dual stack NetworkType, IpDiscovery controls the Ip protocol (ipv4 or ipv6) returned by the engine commands such as `cluster info` and `cluster nodes` which are used by clients to connect to the nodes in the cluster.",
      "$ref": "#/definitions/SupportedIpDiscoveryTypes",
      "markdownDescription": "For clusters wth dual stack NetworkType, IpDiscovery controls the Ip protocol (ipv4 or ipv6) returned by the engine commands such as `cluster info` and `cluster nodes` which are used by clients to connect to the nodes in the cluster.\n\n---\n\nRequired: No  \nUpdate requires: No interruption\n"
    },
    "KmsKeyId": {
      "description": "The ID of the KMS key used to encrypt the cluster.",
      "type": "string",
      "markdownDescription": "The ID of the KMS key used to encrypt the cluster.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: Replacement\n"
    },
    "SnapshotArns": {
      "description": "A list of Amazon Resource Names (ARN) that uniquely identify the RDB snapshot files stored in Amazon S3. The snapshot files are used to populate the new cluster. The Amazon S3 object name in the ARN cannot contain any commas.",
      "type": "array",
      "uniqueItems": false,
      "insertionOrder": false,
      "items": {
        "type": "string",
        "markdownDescription": "\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
      },
      "markdownDescription": "A list of Amazon Resource Names (ARN) that uniquely identify the RDB snapshot files stored in Amazon S3. The snapshot files are used to populate the new cluster. The Amazon S3 object name in the ARN cannot contain any commas.\n\n---\n\nRequired: No  \nType: Array  \nUpdate requires: Replacement\n"
    },
    "SnapshotName": {
      "description": "The name of a snapshot from which to restore data into the new cluster. The snapshot status changes to restoring while the new cluster is being created.",
      "type": "string",
      "markdownDescription": "The name of a snapshot from which to restore data into the new cluster. The snapshot status changes to restoring while the new cluster is being created.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: Replacement\n"
    },
    "FinalSnapshotName": {
      "description": "The user-supplied name of a final cluster snapshot. This is the unique name that identifies the snapshot. MemoryDB creates the snapshot, and then deletes the cluster immediately afterward.",
      "type": "string",
      "markdownDescription": "The user-supplied name of a final cluster snapshot. This is the unique name that identifies the snapshot. MemoryDB creates the snapshot, and then deletes the cluster immediately afterward.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
    },
    "ARN": {
      "description": "The Amazon Resource Name (ARN) of the cluster.",
      "type": "string",
      "markdownDescription": "The Amazon Resource Name (ARN) of the cluster.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "Engine": {
      "description": "The engine type used by the cluster.",
      "type": "string",
      "markdownDescription": "The engine type used by the cluster.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
    },
    "EngineVersion": {
      "description": "The Redis engine version used by the cluster.",
      "type": "string",
      "markdownDescription": "The Redis engine version used by the cluster.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\n"
    },
    "ClusterEndpoint": {
      "description": "The cluster endpoint.",
      "$ref": "#/definitions/Endpoint",
      "markdownDescription": "The cluster endpoint.\n\n---\n\nRequired: No  \nType:   \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "AutoMinorVersionUpgrade": {
      "description": "A flag that enables automatic minor version upgrade when set to true.\n\nYou cannot modify the value of AutoMinorVersionUpgrade after the cluster is created. To enable AutoMinorVersionUpgrade on a cluster you must set AutoMinorVersionUpgrade to true when you create a cluster.",
      "type": "boolean",
      "markdownDescription": "A flag that enables automatic minor version upgrade when set to true.\n\nYou cannot modify the value of AutoMinorVersionUpgrade after the cluster is created. To enable AutoMinorVersionUpgrade on a cluster you must set AutoMinorVersionUpgrade to true when you create a cluster.\n\n---\n\nRequired: No  \nType: Boolean  \nUpdate requires: No interruption\n"
    },
    "Tags": {
      "description": "An array of key-value pairs to apply to this cluster.",
      "type": "array",
      "maxItems": 50,
      "uniqueItems": true,
      "insertionOrder": false,
      "items": {
        "$ref": "#/definitions/Tag"
      },
      "markdownDescription": "An array of key-value pairs to apply to this cluster.\n\n---\n\nRequired: No  \nType: Array  \nUpdate requires: No interruption\n"
    }
  },
  "tagging": {
    "taggable": true,
    "tagOnCreate": true,
    "tagUpdatable": true,
    "cloudFormationSystemTags": true,
    "tagProperty": "/properties/Tags",
    "permissions": [
      "memorydb:TagResource",
      "memorydb:ListTags",
      "memorydb:UntagResource"
    ]
  },
  "additionalProperties": false,
  "readOnlyProperties": [
    "/properties/Status",
    "/properties/ClusterEndpoint/Address",
    "/properties/ClusterEndpoint/Port",
    "/properties/ARN",
    "/properties/ParameterGroupStatus"
  ],
  "required": [
    "ClusterName",
    "NodeType",
    "ACLName"
  ],
  "createOnlyProperties": [
    "/properties/ClusterName",
    "/properties/TLSEnabled",
    "/properties/DataTiering",
    "/properties/KmsKeyId",
    "/properties/Port",
    "/properties/SubnetGroupName",
    "/properties/SnapshotArns",
    "/properties/MultiRegionClusterName",
    "/properties/SnapshotName",
    "/properties/NetworkType"
  ],
  "writeOnlyProperties": [
    "/properties/SnapshotArns",
    "/properties/SnapshotName",
    "/properties/MultiRegionClusterName",
    "/properties/FinalSnapshotName"
  ],
  "primaryIdentifier": [
    "/properties/ClusterName"
  ],
  "handlers": {
    "create": {
      "permissions": [
        "kms:DescribeKey",
        "kms:CreateGrant",
        "memorydb:CreateCluster",
        "memorydb:DescribeClusters",
        "memorydb:TagResource",
        "memorydb:ListTags",
        "iam:CreateServiceLinkedRole"
      ],
      "timeoutInMinutes": 720
    },
    "read": {
      "permissions": [
        "memorydb:DescribeClusters",
        "memorydb:ListTags"
      ]
    },
    "update": {
      "permissions": [
        "memorydb:UpdateCluster",
        "memorydb:DescribeClusters",
        "memorydb:ListTags",
        "memorydb:TagResource",
        "memorydb:UntagResource"
      ],
      "timeoutInMinutes": 2160
    },
    "delete": {
      "permissions": [
        "memorydb:DeleteCluster",
        "memorydb:DescribeClusters"
      ]
    },
    "list": {
      "permissions": [
        "memorydb:DescribeClusters"
      ]
    }
  },
  "attributes": {
    "Status": {
      "description": "The status of the cluster. For example, Available, Updating, Creating.",
      "type": "string",
      "markdownDescription": "The status of the cluster. For example, Available, Updating, Creating.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "ParameterGroupStatus": {
      "description": "The status of the parameter group used by the cluster.",
      "type": "string",
      "markdownDescription": "The status of the parameter group used by the cluster.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\nRead only property: Yes"
    },
    "ARN": {
      "description": "The Amazon Resource Name (ARN) of the cluster.",
      "type": "string",
      "markdownDescription": "The Amazon Resource Name (ARN) of the cluster.\n\n---\n\nRequired: No  \nType: String  \nUpdate requires: No interruption\nRead only property: Yes"
    }
  }
}